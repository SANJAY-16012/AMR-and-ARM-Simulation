<?xml version="1.0"?>
<robot name="armatronix">

    <link name="base_link">
        <visual>
            <origin xyz="0 0 0.075" rpy="0 0 0"/>
            <geometry>
                <box size="0.7 0.6 0.15" />
            </geometry>
            <material name="">
                <color rgba="0.79216 0.81961 0.93333 1" />
            </material>
        </visual>
        <collision>
            <origin xyz="0 0 0.075" rpy="0 0 0"/>
            <geometry>
                <box size="0.7 0.6 0.15" />
            </geometry>
        </collision>
        <inertial><origin xyz="0 0 0.075" rpy="0 0 0" /><mass value="5" /><inertia ixx="0.159375" ixy="0.0" ixz="0.0" iyy="0.213542" iyz="0.0" izz="0.354167" /></inertial>
    </link>


    <link name="camera_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="0.05 0.05 0.05"/> 
            </geometry>
            <material name="cyan">
                <color rgba="0.0 1.0 1.0 1.0"/> 
            </material>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="0.05 0.05 0.05"/> 
            </geometry>
        </collision>
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.1"/> 
            <inertia ixx="0.00005" ixy="0.0" ixz="0.0" iyy="0.00005" iyz="0.0" izz="0.0001"/>
        </inertial>

    </link>

    <joint name="camera_joint" type="fixed">
        <axis xyz="0 1 0" />
        <parent link="base_link" />
        <child link="camera_link" />
        <origin rpy="0 0 0" xyz="0.35 0 0.1" />
    </joint>


    <link name="front_left_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0.0 1.5708 0.0"/>
            <geometry>
                <cylinder radius="0.1" length="0.05" />
            </geometry>
            <material name="black">
                <color rgba="0 0 0 1.0" />
            </material>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0.0 1.5708 0.0"/>
            <geometry>
                <cylinder radius="0.1" length="0.05" />
            </geometry>
            <surface>
                <friction>
                    <ode>
                        <mu>0.9</mu> 
                        <mu2>0.9</mu2>
                    </ode>
                </friction>
            </surface>
        </collision>
    
        <inertial><origin xyz="0 0 0" rpy="0 1.5708 0" /><mass value="2" /><inertia ixx="0.005417" ixy="0.0" ixz="0.0" iyy="0.005417" iyz="0.0" izz="0.010000" /></inertial>
    </link>

    <joint name="front_left_wheel_joint" type="continuous">
        <axis xyz="1 0 0" />
        <parent link="base_link" />
        <child link="front_left_wheel" />
        <origin xyz="0.3 0.325 0" rpy="0 0 1.57"/>
    </joint>


    <link name="front_right_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0.0 1.5708 0.0"/>
            <geometry>
                <cylinder radius="0.1" length="0.05" />
            </geometry>
            <material name="black">
                <color rgba="0 0 0 1.0" />
            </material>
        </visual>
    <collision>
        <origin xyz="0 0 0" rpy="0 1.5708 0" />
        <geometry>
            <cylinder radius="0.1" length="0.05" />
        </geometry>
        <surface>
            <friction>
                <ode>
                    <mu>0.9</mu> 
                    <mu2>0.9</mu2>
                </ode>
            </friction>
        </surface>

    </collision>
    
    <inertial><origin xyz="0 0 0" rpy="0 1.5708 0" /><mass value="2" /><inertia ixx="0.005417" ixy="0.0" ixz="0.0" iyy="0.005417" iyz="0.0" izz="0.010000" /></inertial></link>

    <joint name="front_right_wheel_joint" type="continuous">
        <axis xyz="1 0 0" />
        <parent link="base_link" />
        <child link="front_right_wheel" />
        <origin xyz="0.3 -0.325 0" rpy="0 0 1.57" />
    </joint>


    <link name="rear_left_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 1.5708 0" />
            <geometry>
                <cylinder radius="0.1" length="0.05" />
            </geometry>
            <material name="black">
                <color rgba="0 0 0 1.0" />
            </material>
        </visual>
    <collision>
        <origin xyz="0 0 0" rpy="0 1.5708 0" />
        <geometry>
            <cylinder radius="0.1" length="0.05" />
        </geometry>
        <surface>
            <friction>
                <ode>
                    <mu>0.9</mu> 
                    <mu2>0.9</mu2>
                </ode>
            </friction>
        </surface>
    </collision>
    
    <inertial><origin xyz="0 0 0" rpy="0 1.5708 0" /><mass value="2" /><inertia ixx="0.005417" ixy="0.0" ixz="0.0" iyy="0.005417" iyz="0.0" izz="0.010000" /></inertial></link>

    <joint name="rear_left_wheel_joint" type="continuous">
        <axis xyz="1 0 0" />
        <parent link="base_link" />
        <child link="rear_left_wheel" />
        <origin xyz="-0.3 0.325 0" rpy="0 0 1.57" />
    </joint>


    <link name="rear_right_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 1.5708 0" />
            <geometry>
                <cylinder radius="0.1" length="0.05" />
            </geometry>
            <material name="black">
                <color rgba="0 0 0 1.0" />
            </material>
        </visual>
    <collision>
        <origin xyz="0 0 0" rpy="0 1.5708 0" />
        <geometry>
            <cylinder radius="0.1" length="0.05" />
        </geometry>
        <surface>
            <friction>
                <ode>
                    <mu>0.9</mu> 
                    <mu2>0.9</mu2>
                </ode>
            </friction>
        </surface>
    </collision>
    
    <inertial><origin xyz="0 0 0" rpy="0 1.5708 0" /><mass value="2" /><inertia ixx="0.005417" ixy="0.0" ixz="0.0" iyy="0.005417" iyz="0.0" izz="0.010000" /></inertial></link>

    <joint name="rear_right_wheel_joint" type="continuous">
        <axis xyz="1 0 0" />
        <parent link="base_link" />
        <child link="rear_right_wheel" />
        <origin xyz="-0.3 -0.325 0" rpy="0 0 1.57" />
    </joint>





    <link name="arm_base_link">
        <visual>
            <geometry>
                <cylinder length="0.05" radius="0.2" />
            </geometry>
            <material name="Black">
                <color rgba="0 0 0 1" />
            </material>
            <origin xyz="0 0 0.025" rpy="0 0 0" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.05" radius="0.2" />
            </geometry>
            <origin xyz="0 0 0.025" rpy="0 0 0" />
        </collision>
        <inertial>
            <mass value="2.0" /> 
            <origin xyz="0 0 0.025" rpy="0 0 0" />
            <inertia ixx="0.0035" ixy="0.0" ixz="0.0" iyy="0.0035" iyz="0.0" izz="0.007" />
        </inertial>
    </link>

    <link name="link_1">
        <visual>
            <origin xyz="0.0 0.0 0.05" rpy="0.0 0.0 0.0" />
            <geometry>
                <cylinder radius="0.08" length="0.5" />
            </geometry>
            <material name="Blue">
                <color rgba="0 0 0.8 1" />
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.08" length="0.5" />
            </geometry>
            <origin xyz="0.0 0.0 0.05" rpy="0.0 0.0 0.0" />
        </collision>
        <inertial>
            <mass value="1.5" /> 
            <origin xyz="0 0 0.05" rpy="0 0 0" />
            <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.0015" />
        </inertial>
    </link>

    <link name="link_2">
        <visual>
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
            <geometry>
                <sphere radius="0.08"/>
                <!-- <cylinder radius="0.08" length="0.1" /> -->
            </geometry>
            <material name="Red">
                <color rgba="1 0 0 1" />
            </material>
        </visual>
        <collision>
            <geometry>
                <sphere radius="0.08"/>
                <!-- <cylinder radius="0.08" length="0.1" /> -->
            </geometry>
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
        </collision>
        <inertial>
            <mass value="1.0" /> 
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
            <inertia ixx="0.00256" ixy="0" ixz="0" iyy="0.00256" iyz="0" izz="0.00256"/>
        </inertial>
    </link>

    <link name="link_3">
        <visual>
            <origin xyz="0.0 0 -0.02" rpy="0 0 0" />
            <geometry>
                <cylinder radius="0.05" length="0.4" />
            </geometry>
            <material name="Blue">
                <color rgba="0.5 0.5 0.5 1" />
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.05" length="0.4" />
            </geometry>
            <origin xyz="0.0 0 -0.02" rpy="0 0 0" />
        </collision>
        <inertial>
            <mass value="1.0" /> 
            <origin xyz="0.0 0 -0.02" rpy="0 0 0" />
            <inertia ixx="0.013958" ixy="0.0" ixz="0.0" iyy="0.013958" iyz="0.0" izz="0.00125" />
        </inertial>
    </link>

    <link name="link_4">
        <visual>
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
            <geometry>
                <sphere radius="0.06"/>
            </geometry>
            <material name="Red">
                <color rgba="1 0 0 1" />
            </material>
        </visual>
        <collision>
            <geometry>
                <sphere radius="0.06"/>
            </geometry>
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
        </collision>
        <inertial>
            <mass value="0.5" /> 
            <origin xyz="0 0 0.0" rpy="0 1.5708 0" />
            <inertia ixx="0.0002" ixy="0.0" ixz="0.0" iyy="0.0002" iyz="0.0" izz="0.00005" />
        </inertial>
    </link>

    <link name="link_5">
        <visual>
            <origin xyz="0 0.0 0.0" rpy="0 0 0" />
            <geometry>
                <cylinder radius="0.03" length="0.2" />
            </geometry>
            <material name="Blue">
                <color rgba="0.5 0.5 0.5 1" />
            </material>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.03" length="0.2" />
            </geometry>
            <origin xyz="0 0.0 0.0" rpy="0 0 0" />
        </collision>
        <inertial>
            <mass value="0.8" /> 
            <origin xyz="0 0.0 0.0" rpy="0 0 0" />
            <inertia ixx="0.002693" ixy="0.0" ixz="0.0" iyy="0.002693" iyz="0.0" izz="0.00036" />
        </inertial>
    </link>

    <link name="gripper_link">
        <visual>
            <geometry>
                <!-- <mesh filename="/home/kira/sample_ws/install/armatronix/share/armatronix/meshes/angular_gripper_body.stl" scale="0.002 0.002 0.002"/> -->
                <mesh filename='package://armatronix/meshes/angular_gripper_body.stl' scale="0.002 0.002 0.002"/>
            </geometry>
            <material name="black">
                    <color rgba="0 0 0 1.0" />
            </material>
            <origin xyz="0 0.0 0.0" rpy="3.14 0 0"/>
        </visual>

        <collision>
            <geometry>
                <!-- <mesh filename="/home/kira/sample_ws/install/armatronix/share/armatronix/meshes/angular_gripper_body.stl" scale="0.002 0.002 0.002"/> -->
                <mesh filename='package://armatronix/meshes/angular_gripper_body.stl' scale="0.002 0.002 0.002"/>
            </geometry>
            <origin xyz="0 0.0 0.0" rpy="3.14 0 0"/>
        </collision>

        <inertial>
            <mass value="0.2"/>  
            <origin xyz="0 0.0 0.0" rpy="3.14 0 0"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
    </link>

    <link name="gripper_left_claw">
        <visual>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <geometry>
                <!-- <mesh filename="/home/kira/sample_ws/install/armatronix/share/armatronix/meshes/angular_gripper_left_claw.stl" scale="0.002 0.002 0.002"/> -->
                <mesh filename='package://armatronix/meshes/angular_gripper_left_claw.stl' scale="0.002 0.002 0.002"/>
            </geometry>
            <material name="black">
                    <color rgba="0 0 0 1.0" />
            </material>
        </visual>

        <collision>
            <geometry>
                <!-- <mesh filename="/home/kira/sample_ws/install/armatronix/share/armatronix/meshes/angular_gripper_left_claw.stl" scale="0.002 0.002 0.002"/> -->
                <mesh filename='package://armatronix/meshes/angular_gripper_left_claw.stl' scale="0.002 0.002 0.002"/>
            </geometry>
            <origin xyz="0 0.0 0.0" rpy="0 0 0"/>
        </collision>

        <inertial>
            <mass value="0.05"/>  
            <origin xyz="0 0.0 0.0" rpy="3.14 0 0"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
    </link>

    <joint name="joint_0" type="fixed">
        <parent link="base_link" />
        <child link="arm_base_link" />
        <origin rpy="0 0 0" xyz="0.0 0.0 0.15" />
    </joint>

    <joint name="joint_1" type="revolute">
        <axis xyz="0 0 1" />
        <parent link="arm_base_link" />
        <child link="link_1" />
        <origin rpy="0 0 0" xyz="0.0 0.0 0.25" />
        <limit lower="-3.14" upper="0.0" effort="10" velocity="1.0" />
    </joint>

    <joint name="joint_2" type="revolute">
        <axis xyz="1 0 0" />
        <dynamics damping="0.1" friction="0.0"/>

        <parent link="link_1" />
        <child link="link_2" />
        <origin rpy="0 0 0" xyz="0.0 0.0 0.375" />
        <limit lower="-0.1" upper="2.00" effort="50" velocity="1.0" />
    </joint>

    <joint name="joint_3" type="fixed">
        <parent link="link_2" />
        <child link="link_3" />
        <origin rpy="1.57 0 0" xyz="0.0 0.25 0 " />
    </joint>

    <joint name="joint_4" type="revolute">
        <parent link="link_3" />
        <child link="link_4" />
        <origin rpy="-0.785 0 0" xyz=" 0 0 -0.27" />
        <axis xyz="1 0 0" />
        <limit lower="-0.5" upper="0.3" effort="10" velocity="1.0" />
    </joint>

    <joint name="joint_5" type="fixed">
        <parent link="link_4" />
        <child link="link_5" />
        <origin rpy="0 0 0" xyz="0.0 0.0 -0.15 " />
    </joint>

    <joint name="gripper_joint" type="revolute">
        <axis xyz="0 1 0" />
        <parent link="link_5"/>
        <child link="gripper_link"/>
        <limit lower="0.00" upper="1.57" effort="10" velocity="1.0" />
        <origin xyz="0 0 -0.1" rpy="1.5708 0 0"/>  
    </joint>

    <joint name="left_claw_joint" type="revolute">
        <axis xyz="0 1 0"/>
        <parent link="gripper_link"/>
        <child link="gripper_left_claw"/>
        <limit lower="0.00" upper="1.57" effort="10" velocity="1.0"/>
        <origin xyz="0 0 -0.3" rpy="0 0 0"/>
    </joint>

    <gazebo reference="base_link">
        <material>Gazebo/Red</material>
    </gazebo>

    <gazebo reference="front_left_wheel">
        <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="front_right_wheel">
        <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="rear_left_wheel">
        <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="rear_right_wheel">
        <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="arm_base_link">
        <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="link_1">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="link_3">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="link_2">
        <material>Gazebo/Red</material>
    </gazebo>

    <gazebo reference="link_4">
        <material>Gazebo/Red</material>
    </gazebo>

    <gazebo reference="link_5">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="camera_link">
        <material>Gazebo/cyan</material>
    </gazebo>


    <ros2_control name="IgnitionSystem" type="system">
        <hardware>
            <plugin>gz_ros2_control/GazeboSimSystem</plugin>
        </hardware>
        <joint name="joint_1">
            <command_interface name="position"/>
            <state_interface name="velocity"/>
            <state_interface name="position"/>
        </joint>
        <joint name="joint_2">
            <command_interface name="position"/>
            <state_interface name="velocity"/>
            <state_interface name="position"/>
        </joint>
        <joint name="joint_4">
            <command_interface name="position"/>
            <state_interface name="velocity"/>
            <state_interface name="position"/>
        </joint>

        <joint name="gripper_joint">
            <command_interface name="position"/>
            <state_interface name="velocity"/>
            <state_interface name="position"/>
        </joint>
    </ros2_control>

    <gazebo>
        <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
            <robot_param>robot_description</robot_param>
            <parameters>/home/kira/sample_ws/install/armatronix/share/armatronix/config/joint_controller.yaml</parameters>
        </plugin>
    </gazebo>

    <gazebo> 
        <plugin
        filename="gz-sim-diff-drive-system"
        name="gz::sim::systems::DiffDrive">
        <left_joint>front_left_wheel_joint</left_joint>
        <left_joint>rear_left_wheel_joint</left_joint>
        <right_joint>front_right_wheel_joint</right_joint>
        <right_joint>rear_right_wheel_joint</right_joint>
        <wheel_separation>0.6</wheel_separation>
        <wheel_radius>0.1</wheel_radius>
        <max_linear_acceleration>2</max_linear_acceleration>
        <min_linear_acceleration>-2</min_linear_acceleration>
        <max_angular_acceleration>3</max_angular_acceleration>
        <min_angular_acceleration>-3</min_angular_acceleration>
        <max_linear_velocity>2.0</max_linear_velocity>
        <min_linear_velocity>-2.0</min_linear_velocity>
        <max_angular_velocity>1</max_angular_velocity>
        <min_angular_velocity>-1</min_angular_velocity>
        <topic>cmd_vel</topic>
        <frame_id>odom</frame_id>
        <child_frame_id>base_link</child_frame_id>
        <odom_topic>odom</odom_topic>
        <odom_publisher_frequency>50</odom_publisher_frequency>
        <tf_topic>/tf</tf_topic>
      </plugin>
    </gazebo>

    <!-- <gazebo reference="camera_link">
        <sensor name="camera" type="camera">
            <pose>0 0 0 0 0 0</pose>
            <visualise>true</visualise>
            <update_rate>10</update_rate>
            <camera>
                <camera_info_topic>camera/camera_info</camera_info_topic>
                <horizontal_fov>1.889</horizontal_fov>
                <image>
                    <format>R8G8B8</format>
                    <width>640</width>
                    <height>480</height>
                </image>
                <clip>
                    <near>0.85</near>
                    <far>8.0</far>
                </clip>
            </camera>
            <topic>camera/image_raw</topic>
            <gz_frame_id>camera_link_optical</gz_frame_id>
        </sensor>
    </gazebo> -->





</robot>


